var B=(q,u,e)=>new Promise((v,b)=>{var z=r=>{try{c(e.next(r))}catch(_){b(_)}},D=r=>{try{c(e.throw(r))}catch(_){b(_)}},c=r=>r.done?v(r.value):Promise.resolve(r.value).then(z,D);c((e=e.apply(q,u)).next())});import{m as M,a as T,b as H,c as I}from"./e9ce021d.js";import{o as L,h as C,a as i,b as y,c as k,d as U,e as a,w as o,j as p,F as P,m as w,l as G,y as f,z as x,q as J,x as R,A as V,B as K,r as Q}from"./0ae629d1.js";const W={class:"page-contanier"},X={ref:"pageHeader",class:"page-header"},Y={class:"page-content"},Z={class:"flex"},ee={key:1,class:"flex justify-between"},te={key:2,class:"flex justify-between"},ae={class:"flex"},se={__name:"sysMenus",setup(q){L(()=>{v()});const u=C({data:[],loading:!1}),e=C({title:"菜单新增",visible:!1,form:{name:"",icon:"",type:0,ifarme:0,hidden:0,path:"",component_name:"",component:"",sort:100,layout:"defautl",pid:0,permission:""},rules:{name:[{required:!0,message:"请输入名称！",trigger:["input","blur"]}],path:[{required:!0,message:"请输入路由！",trigger:["input","blur"]}],component_name:[{required:!0,message:"请输入组件名称！",trigger:["input","blur"]}],permission:[{required:!0,message:"请输入权限标识！",trigger:["input","blur"]}]}}),v=()=>{u.loading=!0,M().then(n=>{u.data=n.data.list,u.loading=!1})},b=[{type:"selection",fixed:"left"},{title:"名称",key:"name",resizable:!0,width:180},{title:"组件名称",key:"component_name"},{title:"组件",key:"component"},{title:"路由",key:"path"},{title:"权限",key:"permission"},{title:"外链",key:"iframe",render(n){return n.iframe==0?f(x,{type:"info"},{default:()=>"当前窗口"}):f(x,{type:"info"},{default:()=>"外链"})}},{title:"隐藏",key:"hidden",render(n){return n.hidden==0?f(x,{type:"info"},{default:()=>"显示"}):f(x,{type:"info"},{default:()=>"隐藏"})}},{title:"排序",key:"sort",resizable:!0},{title:"操作",key:"actions",width:"150",fixed:"right",render(n){const t=J("permission");return f(K,{},{default:()=>[R(f(V,{size:"small",type:"primary",onClick:()=>_(n)},{default:()=>"编辑"}),[[t,{action:"menus:edit"}]]),R(f(V,{size:"small",type:"error",onClick:()=>j(n)},{default:()=>"删除"}),[[t,{action:"menus:delete"}]])]})}}],z=()=>{e.title="菜单新增",e.visible=!0,e.form={name:"",icon:"",type:0,iframe:0,hidden:0,path:"",component_name:"",component:"",sort:100,layout:"defautl",pid:0,permission:""}},D=(n,t)=>{var g;(g=n.value)==null||g.validate(h=>{h?console.log(h):(console.log("suc"),t&&t())})},c=()=>{const n=Q(null);D(n,r())},r=()=>B(this,null,function*(){const n=e.form.id?yield T(e.form):yield H(e.form);n.code===200&&(e.visible=!1,v()),$message.success(n.message)}),_=n=>{e.title="菜单修改",e.visible=!0,e.form=Object.assign({},n)},$=n=>{I({id:n.id}).then(t=>{$message.success(t.message),v()})},j=n=>{$dialog.confirm({title:"删除警告",content:"你确定要删除此菜单吗？",confirm(){$(n)},cancel(){$message.success("取消删除！")}})};return(n,t)=>{const g=i("page-describe"),h=i("page-table"),d=i("n-radio-button"),N=i("n-radio-group"),s=i("n-form-item"),m=i("n-input"),F=i("n-input-number"),O=i("n-select"),A=i("n-tree-select"),E=i("n-form"),S=i("page-model");return y(),k("div",W,[U("div",X,[a(g,{title:"系统菜单",desc:"用于创建导航栏菜单和动态路由"})],512),U("div",Y,[a(h,{data:u.data,columns:b,loading:u.loading,onOnAdd:z,onOnRefresh:t[0]||(t[0]=l=>v()),permission:{action:"menus:add"}},null,8,["data","loading"])]),a(S,{visible:e.visible,"onUpdate:visible":t[14]||(t[14]=l=>e.visible=l),title:e.title,onOnSave:c},{default:o(()=>[a(E,{ref:"formRefs","label-placement":"left","label-width":80,model:e.form,rules:e.rules,"show-require-mark":!0},{default:o(()=>[a(s,{label:"类型",path:"type"},{default:o(()=>[a(N,{value:e.form.type,"onUpdate:value":t[1]||(t[1]=l=>e.form.type=l),name:"left-size"},{default:o(()=>[a(d,{value:0},{default:o(()=>[p("目录")]),_:1}),a(d,{value:1},{default:o(()=>[p("菜单")]),_:1}),a(d,{value:2},{default:o(()=>[p("按钮")]),_:1})]),_:1},8,["value"])]),_:1}),e.form.type!=2?(y(),k(P,{key:0},[a(s,{label:"名称",path:"name"},{default:o(()=>[a(m,{value:e.form.name,"onUpdate:value":t[2]||(t[2]=l=>e.form.name=l),placeholder:"输入名称:系统管理"},null,8,["value"])]),_:1}),a(s,{label:"图标",path:"icon"},{default:o(()=>[a(m,{value:e.form.icon,"onUpdate:value":t[3]||(t[3]=l=>e.form.icon=l),placeholder:"输入菜单图标:System"},null,8,["value"])]),_:1}),U("div",Z,[a(s,{label:"外链",path:"iframe"},{default:o(()=>[a(N,{value:e.form.iframe,"onUpdate:value":t[4]||(t[4]=l=>e.form.iframe=l),name:"left-size"},{default:o(()=>[a(d,{value:0},{default:o(()=>[p("否")]),_:1}),a(d,{value:1},{default:o(()=>[p("是")]),_:1})]),_:1},8,["value"])]),_:1}),a(s,{label:"隐藏",path:"icon"},{default:o(()=>[a(N,{value:e.form.hidden,"onUpdate:value":t[5]||(t[5]=l=>e.form.hidden=l),name:"left-size"},{default:o(()=>[a(d,{value:0},{default:o(()=>[p("否")]),_:1}),a(d,{value:1},{default:o(()=>[p("是")]),_:1})]),_:1},8,["value"])]),_:1})]),a(s,{label:"路由",path:"path"},{default:o(()=>[a(m,{value:e.form.path,"onUpdate:value":t[6]||(t[6]=l=>e.form.path=l),placeholder:"输入路由地址:/system"},null,8,["value"])]),_:1})],64)):w("",!0),e.form.type==1?(y(),k("div",ee,[a(s,{label:"组件名称",path:"component_name"},{default:o(()=>[a(m,{value:e.form.component_name,"onUpdate:value":t[7]||(t[7]=l=>e.form.component_name=l),placeholder:"输入组件名称:system"},null,8,["value"])]),_:1}),a(s,{label:"组件路径",path:"component"},{default:o(()=>[a(m,{value:e.form.component,"onUpdate:value":t[8]||(t[8]=l=>e.form.component=l),placeholder:"输入组件路径:system/sysUser"},null,8,["value"])]),_:1})])):w("",!0),e.form.type==2?(y(),k("div",te,[a(s,{label:"按钮名称",path:"name"},{default:o(()=>[a(m,{value:e.form.name,"onUpdate:value":t[9]||(t[9]=l=>e.form.name=l),placeholder:"输入按钮名称:列表"},null,8,["value"])]),_:1}),a(s,{label:"权限标识",path:"permission"},{default:o(()=>[a(m,{value:e.form.permission,"onUpdate:value":t[10]||(t[10]=l=>e.form.permission=l),placeholder:"输入权限标识:system:list"},null,8,["value"])]),_:1})])):w("",!0),U("div",ae,[a(s,{label:"排序",path:"sort"},{default:o(()=>[a(F,{value:e.form.sort,"onUpdate:value":t[11]||(t[11]=l=>e.form.sort=l)},null,8,["value"])]),_:1}),e.form.type!=2?(y(),G(s,{key:0,label:"结构",path:"layout",style:{width:"50%"}},{default:o(()=>[a(O,{"consistent-menu-width":!1,value:e.form.layout,"onUpdate:value":t[12]||(t[12]=l=>e.form.layout=l),options:[{label:"默认",value:"defautl"},{label:"新打开",value:"target"}]},null,8,["value"])]),_:1})):w("",!0)]),a(s,{label:"选择级别",path:"pid"},{default:o(()=>[a(A,{"virtual-scroll":!1,options:[{id:0,name:"顶级节点"},...u.data],"default-value":e.form.pid,"label-field":"name","key-field":"id","onUpdate:value":t[13]||(t[13]=l=>{e.form.pid=l})},null,8,["options","default-value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title"])])}}};export{se as default};
//# sourceMappingURL=d51cd1b9.js.map
