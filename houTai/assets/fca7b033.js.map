{"version":3,"file":"fca7b033.js","sources":["../../src/api/nav/config.js","../../src/views/navman/component/BasicSetting.vue"],"sourcesContent":["import { request } from '@/utils'\r\n\r\n\r\nexport function cFind(params) {\r\n    return request({\r\n        url: '/admin/nav.config/find',\r\n        method: 'get',\r\n        params: params\r\n    })\r\n}\r\nexport function cAdd(data) {\r\n    return request({\r\n        url: '/admin/nav.config/add',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}","<template>\r\n  <n-form :label-width=\"80\" :model=\"formValue\" :rules=\"rules\" ref=\"formRef\">\r\n    <n-grid :cols=\"24\" :x-gap=\"30\">\r\n      <n-form-item-gi :span=\"12\" label=\"网站名称\" path=\"name\">\r\n        <n-input  v-model:value=\"formValue.name\" placeholder=\"请输入网站名称\" />\r\n      </n-form-item-gi>\r\n      <n-form-item-gi :span=\"12\" label=\"网站标题\" path=\"title\">\r\n        <n-input\r\n          v-model:value=\"formValue.title\"\r\n          placeholder=\"请输入网站标题\"\r\n        />\r\n      </n-form-item-gi>\r\n      <n-form-item-gi :span=\"12\" label=\"网站描述\" path=\"description\">\r\n        <n-input\r\n          placeholder=\"请输入网站描述\"\r\n          type=\"textarea\"\r\n          v-model:value=\"formValue.description\"\r\n        />\r\n      </n-form-item-gi>\r\n      <n-form-item-gi :span=\"12\" label=\"网站关键字\" path=\"keywords\">\r\n        <n-input\r\n          placeholder=\"请输入网站关键字\"\r\n          type=\"textarea\"\r\n          v-model:value=\"formValue.keywords\"\r\n        />\r\n      </n-form-item-gi>\r\n      <n-form-item-gi :span=\"12\" label=\"一言\" path=\"motto\">\r\n        <n-input\r\n          v-model:value=\"formValue.motto\"\r\n          type=\"textarea\"\r\n          placeholder=\"请输入一言\"\r\n        />\r\n      </n-form-item-gi>\r\n      <n-form-item-gi :span=\"12\" label=\"网站Footer\" path=\"footer\">\r\n        <n-input\r\n          v-model:value=\"formValue.footer\"\r\n          type=\"textarea\"\r\n          placeholder=\"请输入网站footer\"\r\n        />\r\n      </n-form-item-gi>\r\n\r\n      <n-form-item-gi :span=\"24\" label=\"网站logo\" path=\"logo\">\r\n        <upload-image :data=\"{}\" @update:images=\"handleUploadLogo\">\r\n          <n-avatar class=\"cursor-pointer\" :size=\"100\" :src=\"formValue.logo\" />\r\n        </upload-image>\r\n      </n-form-item-gi>\r\n    </n-grid>\r\n    <div>\r\n      <n-space>\r\n        <n-button\r\n          type=\"primary\"\r\n          @click=\"formSubmit\"\r\n          v-permission=\"{ action: 'nweb:save' }\"\r\n          >更新基本信息</n-button\r\n        >\r\n      </n-space>\r\n    </div>\r\n  </n-form>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from \"vue\";\r\nimport { cFind, cAdd } from \"@/api/nav/config.js\";\r\n\r\nconst rules = {\r\n  name: {\r\n    required: true,\r\n    message: \"请输入网站名称\",\r\n    trigger: \"blur\",\r\n  },\r\n};\r\n\r\nconst formRef = ref(null);\r\n\r\nconst formValue = ref({\r\n  title: \"\",\r\n  name: \"\",\r\n  description: \"\",\r\n  keywords: \"\",\r\n  logo: \"\",\r\n  motto: \"\",\r\n  footer: \"\"\r\n});\r\n\r\nonMounted(() => {\r\n  getPageData();\r\n});\r\n\r\nconst getPageData = () => {\r\n  cFind().then((res) => {\r\n    formValue.value = res.data[0];\r\n  });\r\n};\r\n\r\nconst handleUploadLogo = (val) => {\r\n  formValue.value.logo = val.url;\r\n};\r\nconst formSubmit = () => {\r\n  formRef.value.validate((errors) => {\r\n    if (!errors) {\r\n      // $message.success(\"验证成功\");\r\n      saveConfig();\r\n    } else {\r\n      $message.error(\"验证失败，请填写完整信息\");\r\n    }\r\n  });\r\n};\r\n\r\nconst saveConfig = () => {\r\n  cAdd(formValue.value).then((res) => {\r\n    $message.success(res.message);\r\n  });\r\n};\r\n</script>\r\n"],"names":["cFind","params","request","cAdd","data","rules","formRef","ref","formValue","onMounted","getPageData","res","handleUploadLogo","val","formSubmit","errors","saveConfig"],"mappings":"0GAGO,SAASA,EAAMC,EAAQ,CAC1B,OAAOC,EAAQ,CACX,IAAK,yBACL,OAAQ,MACR,OAAQD,CAChB,CAAK,CACL,CACO,SAASE,EAAKC,EAAM,CACvB,OAAOF,EAAQ,CACX,IAAK,wBACL,OAAQ,OACR,KAAME,CACd,CAAK,CACL,yCCgDA,MAAMC,EAAQ,CACZ,KAAM,CACJ,SAAU,GACV,QAAS,UACT,QAAS,MACV,CACH,EAEMC,EAAUC,EAAI,IAAI,EAElBC,EAAYD,EAAI,CACpB,MAAO,GACP,KAAM,GACN,YAAa,GACb,SAAU,GACV,KAAM,GACN,MAAO,GACP,OAAQ,EACV,CAAC,EAEDE,EAAU,IAAM,CACdC,GACF,CAAC,EAED,MAAMA,EAAc,IAAM,CACxBV,EAAO,EAAC,KAAMW,GAAQ,CACpBH,EAAU,MAAQG,EAAI,KAAK,CAAC,CAChC,CAAG,CACH,EAEMC,EAAoBC,GAAQ,CAChCL,EAAU,MAAM,KAAOK,EAAI,GAC7B,EACMC,EAAa,IAAM,CACvBR,EAAQ,MAAM,SAAUS,GAAW,CAC5BA,EAIH,SAAS,MAAM,cAAc,EAF7BC,GAIN,CAAG,CACH,EAEMA,EAAa,IAAM,CACvBb,EAAKK,EAAU,KAAK,EAAE,KAAMG,GAAQ,CAClC,SAAS,QAAQA,EAAI,OAAO,CAChC,CAAG,CACH"}