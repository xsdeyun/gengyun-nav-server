var D=(x,r,e)=>new Promise((u,c)=>{var y=i=>{try{m(e.next(i))}catch(p){c(p)}},k=i=>{try{m(e.throw(i))}catch(p){c(p)}},m=i=>i.done?u(i.value):Promise.resolve(i.value).then(y,k);m((e=e.apply(x,r)).next())});import{m as E,a as j,b as F,c as S}from"./5674fa41.js";import{o as T,h as z,a as s,b as H,c as I,d as w,e as a,w as n,j as b,y as f,z as N,q as L,x as B,A as R,B as M,r as P}from"./0ae629d1.js";const G={class:"page-contanier"},J={ref:"pageHeader",class:"page-header"},K={class:"page-content"},Q={class:"flex"},Z={__name:"navmenu",setup(x){T(()=>{u()});const r=z({data:[],loading:!1}),e=z({title:"菜单新增",visible:!1,form:{name:"",icon:"",description:"",type:0,state:1,sort:100,pid:0},rules:{name:[{required:!0,message:"请输入名称！",trigger:["input","blur"]}]}}),u=()=>{r.loading=!0,E().then(o=>{r.data=o.data.list,r.loading=!1})},c=[{type:"selection",fixed:"left"},{title:"名称",key:"name"},{title:"描述",key:"description"},{title:"排序",key:"sort",resizable:!0},{title:"添加时间",key:"create_time"},{title:"显示",key:"state",render(o){return o.state==0?f(N,{type:"error"},{default:()=>"否"}):f(N,{type:"info"},{default:()=>"是"})}},{title:"操作",key:"actions",width:"150",fixed:"right",render(o){const t=L("permission");return f(M,{},{default:()=>[B(f(R,{size:"small",type:"primary",onClick:()=>p(o)},{default:()=>"编辑"}),[[t,{action:"nmenu:edit"}]]),B(f(R,{size:"small",type:"error",onClick:()=>C(o)},{default:()=>"删除"}),[[t,{action:"nmenu:delete"}]])]})}}],y=()=>{e.title="菜单新增",e.visible=!0,e.form={name:"",icon:"",description:"",type:0,state:1,sort:100,pid:0}},k=(o,t)=>{var v;(v=o.value)==null||v.validate(_=>{_?console.log(_):(console.log("suc"),t&&t())})},m=()=>{const o=P(null);k(o,i())},i=()=>D(this,null,function*(){const o=e.form.id?yield j(e.form):yield F(e.form);o.code===200&&(e.visible=!1,u()),$message.success(o.message)}),p=o=>{e.title="菜单修改",e.visible=!0,e.form=Object.assign({},o)},$=o=>{S({id:o.id}).then(t=>{$message.success(t.message),u()})},C=o=>{$dialog.confirm({title:"删除警告",content:"你确定要删除此菜单吗？",confirm(){$(o)},cancel(){$message.success("取消删除！")}})};return(o,t)=>{const v=s("page-describe"),_=s("page-table"),g=s("n-radio-button"),U=s("n-radio-group"),d=s("n-form-item"),h=s("n-input"),O=s("n-input-number"),V=s("n-tree-select"),q=s("n-form"),A=s("page-model");return H(),I("div",G,[w("div",J,[a(v,{title:"导航菜单",desc:"用于创建导航栏菜单"})],512),w("div",K,[a(_,{data:r.data,columns:c,loading:r.loading,onOnAdd:y,onOnRefresh:t[0]||(t[0]=l=>u()),permission:{action:"nmenu:add"}},null,8,["data","loading"])]),a(A,{visible:e.visible,"onUpdate:visible":t[8]||(t[8]=l=>e.visible=l),title:e.title,onOnSave:m},{default:n(()=>[a(q,{ref:"formRefs","label-placement":"left","label-width":80,model:e.form,rules:e.rules,"show-require-mark":!0},{default:n(()=>[a(d,{label:"类型",path:"type"},{default:n(()=>[a(U,{value:e.form.type,"onUpdate:value":t[1]||(t[1]=l=>e.form.type=l),name:"left-size"},{default:n(()=>[a(g,{value:0},{default:n(()=>[b("目录")]),_:1}),a(g,{value:1},{default:n(()=>[b("菜单")]),_:1})]),_:1},8,["value"])]),_:1}),a(d,{label:"名称",path:"name"},{default:n(()=>[a(h,{value:e.form.name,"onUpdate:value":t[2]||(t[2]=l=>e.form.name=l),placeholder:"输入名称"},null,8,["value"])]),_:1}),a(d,{label:"图标",path:"icon"},{default:n(()=>[a(h,{value:e.form.icon,"onUpdate:value":t[3]||(t[3]=l=>e.form.icon=l),placeholder:"输入菜单图标"},null,8,["value"])]),_:1}),a(d,{label:"描述",path:"description"},{default:n(()=>[a(h,{value:e.form.description,"onUpdate:value":t[4]||(t[4]=l=>e.form.description=l),type:"textarea",placeholder:"请输入描述"},null,8,["value"])]),_:1}),w("div",Q,[a(d,{label:"显示",path:"state"},{default:n(()=>[a(U,{value:e.form.state,"onUpdate:value":t[5]||(t[5]=l=>e.form.state=l),name:"left-size"},{default:n(()=>[a(g,{value:0},{default:n(()=>[b("否")]),_:1}),a(g,{value:1},{default:n(()=>[b("是")]),_:1})]),_:1},8,["value"])]),_:1}),a(d,{label:"排序",path:"sort"},{default:n(()=>[a(O,{value:e.form.sort,"onUpdate:value":t[6]||(t[6]=l=>e.form.sort=l)},null,8,["value"])]),_:1})]),a(d,{label:"选择级别",path:"pid"},{default:n(()=>[a(V,{"virtual-scroll":!1,options:[{id:0,name:"顶级节点"},...r.data],"default-value":e.form.pid,"label-field":"name","key-field":"id","onUpdate:value":t[7]||(t[7]=l=>{e.form.pid=l})},null,8,["options","default-value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title"])])}}};export{Z as default};
//# sourceMappingURL=a912575f.js.map
