{"version":3,"file":"98494667.js","sources":["../../src/views/login/userInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"userInfo-contanier p-3\">\r\n    <n-grid x-gap=\"12\" cols=\"1 s:1 m:1 l:7 xl:7 2xl:7\" responsive=\"screen\">\r\n      <n-grid-item :span=\"2\">\r\n        <n-card class=\"border-rd\" :bordered=\"false\" title=\"个人信息\" hoverable>\r\n          <n-divider style=\"margin-top: 0 !important\" />\r\n          <div class=\"avatar-content mt-5 mb-5\">\r\n            <n-space vertical align=\"center\">\r\n              <n-avatar round :size=\"100\" :src=\"userStore.user?.avatar_path\" />\r\n              <n-upload\r\n                :action=\"systemConfig.user_upload_avatar\"\r\n                :data=\"{ userId: userStore.user?.id }\"\r\n                :show-file-list=\"false\"\r\n              >\r\n                <n-button type=\"primary\" size=\"small\"> 更换头像 </n-button>\r\n              </n-upload>\r\n            </n-space>\r\n          </div>\r\n          <div class=\"info-content\">\r\n            <div class=\"item flex justify-between\">\r\n              <div class=\"item-icon flex items-center justify-center mb-2\">\r\n                <n-icon size=\"20\">\r\n                  <Person />\r\n                </n-icon>\r\n                <span class=\"ml-2\">登录账号</span>\r\n              </div>\r\n              <div class=\"item-text\">\r\n                {{ userStore.user?.username }}\r\n              </div>\r\n            </div>\r\n            <n-divider />\r\n            <div class=\"item flex justify-between\">\r\n              <div class=\"item-icon flex items-center justify-center mb-2\">\r\n                <n-icon size=\"20\">\r\n                  <PersonSharp />\r\n                </n-icon>\r\n                <span class=\"ml-2\">昵称</span>\r\n              </div>\r\n              <div class=\"item-text\">\r\n                {{ userStore.user?.nick_name }}\r\n              </div>\r\n            </div>\r\n            <n-divider />\r\n            <div class=\"item flex justify-between\">\r\n              <div class=\"item-icon flex items-center justify-center mb-2\">\r\n                <n-icon size=\"20\">\r\n                  <Mail />\r\n                </n-icon>\r\n                <span class=\"ml-2\">用户邮箱</span>\r\n              </div>\r\n              <div class=\"item-text\">\r\n                {{ userStore.user?.email }}\r\n              </div>\r\n            </div>\r\n            <n-divider />\r\n            <div class=\"item flex justify-between\">\r\n              <div class=\"item-icon flex items-center justify-center mb-2\">\r\n                <n-icon size=\"20\">\r\n                  <LockClosed />\r\n                </n-icon>\r\n                <span class=\"ml-2\">安全设置</span>\r\n              </div>\r\n              <div class=\"item-text\">\r\n                <n-button\r\n                  type=\"primary\"\r\n                  size=\"small\"\r\n                  text\r\n                  @click=\"updatePassword\"\r\n                >\r\n                  修改密码\r\n                </n-button>\r\n              </div>\r\n            </div>\r\n            <n-divider />\r\n          </div>\r\n        </n-card>\r\n      </n-grid-item>\r\n      <n-grid-item :span=\"5\">\r\n        <n-card :bordered=\"false\" hoverable>\r\n          <n-tabs\r\n            type=\"line\"\r\n            size=\"large\"\r\n            :tabs-padding=\"20\"\r\n            pane-style=\"padding: 20px;\"\r\n          >\r\n            <n-tab-pane name=\"用户信息\">\r\n              <n-form\r\n                ref=\"userForm\"\r\n                label-placement=\"left\"\r\n                :label-width=\"80\"\r\n                :model=\"form\"\r\n                :rules=\"rules\"\r\n                :show-require-mark=\"true\"\r\n              >\r\n                <n-form-item label=\"昵称\" path=\"nick_name\">\r\n                  <n-input\r\n                    v-model:value=\"form.nick_name\"\r\n                    placeholder=\"请输入昵称...\"\r\n                  />\r\n                </n-form-item>\r\n                <n-form-item label=\"邮箱\" path=\"email\">\r\n                  <n-input\r\n                    v-model:value=\"form.email\"\r\n                    placeholder=\"请输入邮箱...\"\r\n                  />\r\n                </n-form-item>\r\n                <n-form-item>\r\n                  <n-button class=\"ml-10\" type=\"primary\" size=\"small\"  @click=\"saveUserData\">\r\n                    保存信息\r\n                  </n-button>\r\n                </n-form-item>\r\n              </n-form>\r\n            </n-tab-pane>\r\n          </n-tabs>\r\n        </n-card>\r\n      </n-grid-item>\r\n    </n-grid>\r\n    <updatePass ref=\"passWord\" />\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { reactive, ref, computed, watch } from \"vue\";\r\nimport { useUserStore } from \"@/store\";\r\nimport { validateEmail } from \"@/utils\";\r\nimport { uEdit } from \"@/api/system/user.js\";\r\nimport updatePass from \"@/components/updatePass/index.vue\";\r\nimport { systemConfig } from \"../../config/system.config\";\r\nconst userStore = useUserStore();\r\n\r\nconst form = reactive({\r\n  id: userStore.user?.id,\r\n  nick_name: userStore.user?.nick_name,\r\n  email: userStore.user?.email,\r\n});\r\nconst rules = {\r\n  nick_name: [\r\n    { required: true, message: \"请输入用昵称！\", trigger: [\"input\", \"blur\"] },\r\n  ],\r\n  email: [\r\n    {\r\n      required: true,\r\n      message: \"邮箱格式不正确！\",\r\n      trigger: [\"input\", \"blur\"],\r\n      validator: (rule, value) => {\r\n        return validateEmail(value);\r\n      },\r\n    },\r\n  ],\r\n};\r\n// 密码修改\r\nconst passWord = ref(null);\r\nconst updatePassword = () => {\r\n  passWord.value?.passShow(form.id);\r\n};\r\n// 信息保存\r\nconst userForm = ref(null);\r\nconst saveUserData = () => {\r\n  userForm.value?.validate((errors) => {\r\n    if (!errors) {\r\n      console.log(\"suc\");\r\n      uEdit(form).then((res) => {\r\n        $message.success(res.message);\r\n      });\r\n    } else {\r\n      console.log(errors);\r\n    }\r\n  });\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.info-content {\r\n  .n-divider {\r\n    margin: 0 !important;\r\n  }\r\n\r\n  .item {\r\n    margin-top: 8px;\r\n  }\r\n}\r\n</style>"],"names":["userStore","useUserStore","form","reactive","_a","_b","_c","rules","rule","value","validateEmail","passWord","ref","updatePassword","userForm","saveUserData","errors","uEdit","res"],"mappings":"ihCA+HA,MAAMA,EAAYC,EAAY,EAExBC,EAAOC,EAAS,CACpB,IAAIC,EAAAJ,EAAU,OAAV,YAAAI,EAAgB,GACpB,WAAWC,EAAAL,EAAU,OAAV,YAAAK,EAAgB,UAC3B,OAAOC,EAAAN,EAAU,OAAV,YAAAM,EAAgB,KACzB,CAAC,EACKC,EAAQ,CACZ,UAAW,CACT,CAAE,SAAU,GAAM,QAAS,UAAW,QAAS,CAAC,QAAS,MAAM,CAAG,CACnE,EACD,MAAO,CACL,CACE,SAAU,GACV,QAAS,WACT,QAAS,CAAC,QAAS,MAAM,EACzB,UAAW,CAACC,EAAMC,IACTC,EAAcD,CAAK,CAE7B,CACF,CACH,EAEME,EAAWC,EAAI,IAAI,EACnBC,EAAiB,IAAM,QAC3BT,EAAAO,EAAS,QAAT,MAAAP,EAAgB,SAASF,EAAK,GAChC,EAEMY,EAAWF,EAAI,IAAI,EACnBG,EAAe,IAAM,QACzBX,EAAAU,EAAS,QAAT,MAAAV,EAAgB,SAAUY,GAAW,CAC9BA,EAMH,QAAQ,IAAIA,CAAM,GALlB,QAAQ,IAAI,KAAK,EACjBC,GAAMf,CAAI,EAAE,KAAMgB,GAAQ,CACxB,SAAS,QAAQA,EAAI,OAAO,CACpC,CAAO,EAIP,EACA"}